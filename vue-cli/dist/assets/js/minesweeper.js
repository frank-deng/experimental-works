(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["minesweeper"],{"3e99":function(r,t,n){"use strict";n.r(t);var a=function(){var r=this,t=r.$createElement,n=r._self._c||t;return n("div",{staticClass:"minesweeper",attrs:{oncontextmenu:"return false"}},[r.board?n("div",{staticClass:"board-container"},r._l(r.board,(function(t,a){return n("div",{staticClass:"board-row"},r._l(t,(function(t,i){return n("div",{staticClass:"board-cell",class:{undig:!t.dig},on:{click:function(t){return t.stopPropagation(),r.operate(a,i,t)}}},[r._v("\n        "+r._s(r.displayText(t))+"\n      ")])})),0)})),0):r._e(),n("el-button",{on:{click:r.restart}},[r._v("重新开始")]),r._v("\n  "+r._s(r.status)+"\n")],1)},i=[],o=(n("ac4d"),n("8a81"),n("ac6a"),{data:function(){return{board:null,status:"start"}},created:function(){this.restart()},methods:{restart:function(){this.createBoard(16,16)},createBoard:function(r,t){for(var n=[],a=0;a<t;a++){for(var i=[],o=0;o<r;o++)i.push({mine:!1,counter:0,dig:!1,mark:!1});n.push(i)}this.$set(this,"board",n),this.status="start",this.$forceUpdate()},initMines:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=this.board.length,i=this.board[0].length;if(r>=a*i)throw new Error("Too many mines");for(var o=[],e=0;e<a;e++)for(var s=0;s<i;s++)void 0!==n&&void 0!==t&&t==e&&n==s||o.push({row:e,col:s});for(var u=o.length,c=0;c<u;c++)if(!(Math.random()>.5)){var f=Math.floor(Math.random()*(u-c-1)+c+1),h=o[c];o[c]=o[f],o[f]=h}for(var l=0;l<r;l++){var d=Math.round(Math.random()*(o.length-1)),v=o[d],g=v.row,b=v.col;this.board[g][b].mine=!0,o.splice(d,1)}for(var m=0;m<a;m++)for(var w=0;w<i;w++){var y=this.board[m][w];y.counter=this.getNeighbourMineCount(m,w)}},getNeighbours:function(r,t){for(var n=this.board.length,a=this.board[0].length,i=[],o=r-1;o<=r+1;o++)for(var e=t-1;e<=t+1;e++)o<0||o>=n||e<0||e>=a||o==r&&e==t||i.push({row:o,col:e});return i},getNeighbourMineCount:function(r,t){var n,a,i=0,o=!0,e=!1,s=void 0;try{for(var u,c=this.getNeighbours(r,t)[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var f=u.value;n=f.row,a=f.col;var h=this.board[n][a];h.mine&&i++}}catch(l){e=!0,s=l}finally{try{o||null==c.return||c.return()}finally{if(e)throw s}}return i},displayText:function(r){return r.mark?"旗":r.dig||"running"!=this.status&&"start"!=this.status?r.mine?"雷":r.counter>0?r.counter:void 0:""},operate:function(r,t,n){if("start"==this.status||"running"==this.status){var a=this.board[r][t];if(n.shiftKey?a.mark=!a.mark:a.mark||this.dig(r,t),"running"==this.status){while(this.autoproc());var i=!0,o=!0,e=!1,s=void 0;try{for(var u,c=this.board[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var f=u.value,h=!0,l=!1,d=void 0;try{for(var v,g=f[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var b=v.value;if(!b.mine&&!b.dig){i=!1;break}}}catch(m){l=!0,d=m}finally{try{h||null==g.return||g.return()}finally{if(l)throw d}}}}catch(m){e=!0,s=m}finally{try{o||null==c.return||c.return()}finally{if(e)throw s}}i&&(this.status="success")}}},dig:function(r,t){var n=this,a=this.board[r][t];if(!a.mark)if("start"==this.status&&(this.initMines(40,r,t),this.status="running"),a.dig=!0,a.mine)this.status="failed";else if(0==a.counter){var i=this.getNeighbours(r,t);i.forEach((function(r){var t=r.row,a=r.col;n.board[t][a].dig||n.dig(t,a)}))}},autoproc:function(){for(var r=this,t=this.board.length,n=this.board[0].length,a=!1,i=0;i<t;i++)for(var o=0;o<n;o++){var e=this.board[i][o];if(!e.mine&&e.dig&&0!=e.counter&&!e.mark){var s=this.getNeighbours(i,o).map((function(t){var n=t.row,a=t.col;return r.board[n][a]})).filter((function(r){return!r.dig}));if(s.length==e.counter){var u=!0,c=!1,f=void 0;try{for(var h,l=s[Symbol.iterator]();!(u=(h=l.next()).done);u=!0){var d=h.value;d.mark=!0}}catch(m){c=!0,f=m}finally{try{u||null==l.return||l.return()}finally{if(c)throw f}}}}}for(var v=0;v<t;v++)for(var g=function(t){var n=r.board[v][t];if(n.mine||!n.dig||0==n.counter||n.mark)return"continue";var i=r.getNeighbours(v,t),o=0;if(i.forEach((function(t){var n=t.row,a=t.col,i=r.board[n][a];!i.dig&&i.mark&&o++})),n.counter!=o)return"continue";i.forEach((function(t){var n=t.row,i=t.col,o=r.board[n][i];o.dig||o.mark||(a=!0,r.dig(n,i))}))},b=0;b<n;b++)g(b);return a}}}),e=o,s=(n("efe3"),n("2877")),u=Object(s["a"])(e,a,i,!1,null,"67467f8e",null);t["default"]=u.exports},"9fb2":function(r,t,n){},efe3:function(r,t,n){"use strict";var a=n("9fb2"),i=n.n(a);i.a}}]);