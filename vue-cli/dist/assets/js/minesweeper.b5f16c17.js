(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["minesweeper"],{"21a6":function(t,e,n){(function(n){var r,a,i;(function(n,o){a=[],r=o,i="function"===typeof r?r.apply(e,a):r,void 0===i||(t.exports=i)})(0,(function(){"use strict";function e(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function r(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){s(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function a(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(r){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(t,e,n){var s=o.URL||o.webkitURL,l=document.createElement("a");e=e||t.name||"download",l.download=e,l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?i(l):a(l.href)?r(t,e,n):i(l,l.target="_blank")):(l.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){i(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,o){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,o),n);else if(a(t))r(t,n,o);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout((function(){i(s)}))}}:function(t,e,n,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof t)return r(t,e,n);var i="application/octet-stream"===t.type,s=/constructor/i.test(o.HTMLElement)||o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||i&&s)&&"object"==typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=t:location=t,a=null},u.readAsDataURL(t)}else{var c=o.URL||o.webkitURL,f=c.createObjectURL(t);a?a.location=f:location.href=f,a=null,setTimeout((function(){c.revokeObjectURL(f)}),4e4)}});o.saveAs=s.saveAs=s,t.exports=s}))}).call(this,n("c8ba"))},"397e":function(t,e,n){"use strict";var r=n("cba1"),a=n.n(r);a.a},"3a40":function(t,e,n){},"3e99":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"minesweeper",attrs:{oncontextmenu:"return false"}},[n("div",{staticClass:"toolbox"},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.restart}},[t._v("新游戏")]),n("el-button",{attrs:{size:"mini"},on:{click:t.exportLog}},[t._v("游戏记录")]),t.board?[n("div",{staticClass:"steps"},[t._v("步数："+t._s(t.steps))]),n("div",{staticClass:"mines"},[t._v(t._s(t.minesMarked)+"/"+t._s(t.mines))]),"success"==t.status?n("div",{staticClass:"success"},[t._v("成功了")]):"failed"==t.status?n("div",{staticClass:"failed"},[t._v("失败了")]):n("div",{staticClass:"statusSpacer"})]:t._e()],2),t.board?n("div",{staticClass:"board-container"},t._l(t.board,(function(e,r){return n("div",{staticClass:"board-row"},t._l(e,(function(e,a){return n("div",{staticClass:"board-cell"},[n("BoardCell",{attrs:{value:e,status:t.status},nativeOn:{click:function(e){return e.stopPropagation(),t.operate(r,a,e)}}})],1)})),0)})),0):t._e(),n("div",{staticClass:"hint"},[t._v("本页面使用LocalStorage存储您的游戏记录，包括开始时间、结束时间、步数、是否成功。")]),n("newLevel",{ref:"newLevel"})],1)},a=[],i=(n("ac4d"),n("8a81"),n("ac6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"minesweeper-cell",class:t.cellClass},["failed"==t.status?[t.cell.mark&&!t.cell.mine?n("font-awesome-icon",{staticClass:"wrong-mark",attrs:{icon:"times"}},[t._v("X")]):t.cell.mark&&t.cell.mine?n("font-awesome-icon",{attrs:{icon:"flag"}}):t.cell.mine?n("font-awesome-icon",{staticClass:"mine",attrs:{icon:"bomb"}}):t.cell.dig?n("span",[t._v(t._s(t.cell.counter||""))]):t._e()]:[t.cell.mark?n("font-awesome-icon",{attrs:{icon:"flag"}}):t.cell.dig?n("span",[t._v(t._s(t.cell.counter||""))]):t._e()]],2)}),o=[],s={props:{value:null,status:null},computed:{cell:function(){return this.value},cellClass:function(){return{active:"start"==this.status||"running"==this.status,undig:!this.value.dig}}}},l=s,u=(n("397e"),n("2877")),c=Object(u["a"])(l,i,o,!1,null,"b39940ae",null),f=c.exports,d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.display?n("el-dialog",{attrs:{visible:t.display,title:"新游戏",center:!0,"close-on-click-modal":!1,"custom-class":"dialogMinesweeperNewGame",width:"320px","append-to-body":!0},on:{"update:visible":function(e){t.display=e}}},[n("el-form",{attrs:{size:"mini","label-width":"40px"}},[n("el-form-item",{attrs:{label:"难度"}},[n("el-radio-group",{model:{value:t.formData.level,callback:function(e){t.$set(t.formData,"level",e)},expression:"formData.level"}},[n("el-radio",{attrs:{label:"novice"}},[t._v("初级")]),n("el-radio",{attrs:{label:"medium"}},[t._v("中级")]),n("el-radio",{attrs:{label:"expert"}},[t._v("高级")]),n("el-radio",{attrs:{label:"custom"}},[t._v("自定义")])],1)],1),t.customLevel?[n("el-form-item",{attrs:{label:"宽度"}},[n("el-input-number",{attrs:{precision:0,min:4,max:32},on:{change:t.updateMines},model:{value:t.formData.width,callback:function(e){t.$set(t.formData,"width",e)},expression:"formData.width"}})],1),n("el-form-item",{attrs:{label:"高度"}},[n("el-input-number",{attrs:{precision:0,min:4,max:32},on:{change:t.updateMines},model:{value:t.formData.height,callback:function(e){t.$set(t.formData,"height",e)},expression:"formData.height"}})],1),n("el-form-item",{attrs:{label:"雷数"}},[n("el-input-number",{attrs:{precision:0,min:1,max:t.maxMines},model:{value:t.formData.mines,callback:function(e){t.$set(t.formData,"mines",e)},expression:"formData.mines"}})],1)]:t._e()],2),n("template",{slot:"footer"},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.submit}},[t._v("新游戏")])],1)],2):t._e()},m=[],h={data:function(){return{display:!1,resolve:null,reject:null,formData:{level:"novice",width:10,height:10,mines:10}}},computed:{customLevel:function(){return"custom"==this.formData.level},maxMines:function(){return this.formData.width*this.formData.height-4}},watch:{display:function(t){t||(this.resolve&&this.reject&&this.reject("cancel"),this.resolve=this.reject=null)}},methods:{open:function(){var t=this;return new Promise((function(e,n){Object.assign(t,{resolve:e,reject:n,display:!0})}))},submit:function(){var t=Object.assign({},this.formData);switch(t.level){case"novice":Object.assign(t,{width:10,height:10,mines:10});break;case"medium":Object.assign(t,{width:16,height:16,mines:40});break;case"expert":Object.assign(t,{width:30,height:16,mines:99});break}this.resolve(t),Object.assign(this,{resolve:null,reject:null,display:!1})},updateMines:function(){this.formData.mines>this.maxMines&&(this.formData.mines=this.maxMines)}}},v=h,g=(n("5e6e"),Object(u["a"])(v,d,m,!1,null,null,null)),p=g.exports,b=n("9285"),w=n("21a6"),y={components:{BoardCell:f,newLevel:p},data:function(){return{level:null,width:null,height:null,mines:null,steps:null,board:null,status:null,startTime:null,endTime:null,log:[]}},computed:{minesMarked:function(){if(!Array.isArray(this.board))return 0;var t=0,e=!0,n=!1,r=void 0;try{for(var a,i=this.board[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value,s=!0,l=!1,u=void 0;try{for(var c,f=o[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var d=c.value;d.mark&&t++}}catch(m){l=!0,u=m}finally{try{s||null==f.return||f.return()}finally{if(l)throw u}}}}catch(m){n=!0,r=m}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}return t}},watch:{status:function(t){"running"==t?this.startTime=(new Date).getTime():"failed"!=t&&"success"!=t||(this.endTime=(new Date).getTime(),this.writeLog())}},created:function(){this.readLog()},methods:{readLog:function(){try{var t=localStorage.getItem("minesweeper_log");if(!t)return;this.log=JSON.parse(t)}catch(e){console.error(e)}},writeLog:function(){this.log.push({level:this.level,width:this.width,height:this.height,mines:this.mines,startTime:this.startTime,endTime:this.endTime,status:this.status,steps:this.steps}),localStorage.setItem("minesweeper_log",JSON.stringify(this.log))},exportLog:function(){var t=['"Level","Start Time","Time Elapsed","Steps","Success"'],e=!0,n=!1,r=void 0;try{for(var a,i=this.log[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value;if("custom"!=o.level){var s=b["a"].format(o.startTime,"YYYY-MM-DD HH:mm:ss"),l=Math.round((o.endTime-o.startTime)/1e3),u="success"==o.status?"Y":"N";t.push('"'.concat(o.level,'","').concat(s,'",').concat(l,",").concat(o.steps,",").concat(u))}}}catch(c){n=!0,r=c}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}Object(w["saveAs"])(new Blob([t.join("\r\n")]),"minesweeper.csv")},restart:function(){var t=this;this.$refs.newLevel.open().then((function(e){Object.assign(t,{level:e.level,width:e.width,height:e.height,mines:e.mines,status:"start",startTime:null,endTime:null,steps:0}),t.createBoard(t.width,t.height)}))},createBoard:function(t,e){for(var n=[],r=0;r<e;r++){for(var a=[],i=0;i<t;i++)a.push({mine:!1,counter:0,dig:!1,mark:!1});n.push(a)}this.$set(this,"board",n),this.status="start",this.$forceUpdate()},initMines:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this.board.length,a=this.board[0].length;if(t>=r*a)throw new Error("Too many mines");for(var i=[],o=0;o<r;o++)for(var s=0;s<a;s++)void 0!==n&&void 0!==e&&e==o&&n==s||i.push({row:o,col:s});for(var l=i.length,u=0;u<l;u++)if(!(Math.random()>.5)){var c=Math.floor(Math.random()*(l-u-1))+u+1;if(i[c]){var f=i[u];i[u]=i[c],i[c]=f}}for(var d=0;d<t&&i.length;d++){var m=Math.floor(Math.random()*(i.length-1));try{var h=i[m],v=h.row,g=h.col;this.board[v][g].mine=!0,i.splice(m,1)}catch(y){console.error(m,i.length,i[m])}}for(var p=0;p<r;p++)for(var b=0;b<a;b++){var w=this.board[p][b];w.counter=this.getNeighbourMineCount(p,b)}},getNeighbours:function(t,e){for(var n=this.board.length,r=this.board[0].length,a=[],i=t-1;i<=t+1;i++)for(var o=e-1;o<=e+1;o++)i<0||i>=n||o<0||o>=r||i==t&&o==e||a.push({row:i,col:o});return a},getNeighbourMineCount:function(t,e){var n,r,a=0,i=!0,o=!1,s=void 0;try{for(var l,u=this.getNeighbours(t,e)[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;n=c.row,r=c.col;var f=this.board[n][r];f.mine&&a++}}catch(d){o=!0,s=d}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}return a},operate:function(t,e,n){if("start"==this.status||"running"==this.status){var r=this.board[t][e];if(!r.mark&&!r.dig)if(this.steps++,n.shiftKey)r.mark=!r.mark;else{r.mark||this.dig(t,e);while("running"==this.status&&this.autoproc());if("running"==this.status){var a=!0,i=!0,o=!1,s=void 0;try{for(var l,u=this.board[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,f=!0,d=!1,m=void 0;try{for(var h,v=c[Symbol.iterator]();!(f=(h=v.next()).done);f=!0){var g=h.value;if(!g.mine&&!g.dig){a=!1;break}}}catch(p){d=!0,m=p}finally{try{f||null==v.return||v.return()}finally{if(d)throw m}}}}catch(p){o=!0,s=p}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}a&&(this.status="success")}}}},dig:function(t,e){var n=this,r=this.board[t][e];if(!r.mark)if("start"==this.status&&(this.initMines(this.mines,t,e),this.status="running"),r.dig=!0,r.mine)this.status="failed";else if(0==r.counter){var a=this.getNeighbours(t,e);a.forEach((function(t){var e=t.row,r=t.col;n.board[e][r].dig||n.dig(e,r)}))}},autoproc:function(){for(var t=this,e=this.board.length,n=this.board[0].length,r=!1,a=0;a<e;a++)for(var i=0;i<n;i++){var o=this.board[a][i];if(!o.mine&&o.dig&&0!=o.counter&&!o.mark){var s=this.getNeighbours(a,i).map((function(e){var n=e.row,r=e.col;return t.board[n][r]})).filter((function(t){return!t.dig}));if(s.length==o.counter){var l=!0,u=!1,c=void 0;try{for(var f,d=s[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var m=f.value;m.mark=!0}}catch(p){u=!0,c=p}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}}}}for(var h=0;h<e;h++)for(var v=function(e){var n=t.board[h][e];if(n.mine||!n.dig||0==n.counter||n.mark)return"continue";var a=t.getNeighbours(h,e),i=0;if(a.forEach((function(e){var n=e.row,r=e.col,a=t.board[n][r];!a.dig&&a.mark&&i++})),n.counter!=i)return"continue";a.forEach((function(e){var n=e.row,a=e.col,i=t.board[n][a];i.dig||i.mark||(r=!0,t.dig(n,a))}))},g=0;g<n;g++)v(g);return r}}},M=y,D=(n("bc30"),Object(u["a"])(M,r,a,!1,null,"3f9e4fbd",null));e["default"]=D.exports},"493a":function(t,e,n){},"5e6e":function(t,e,n){"use strict";var r=n("493a"),a=n.n(r);a.a},9285:function(t,e,n){"use strict";var r={},a=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,i="\\d\\d?",o="\\d{3}",s="\\d{4}",l="[^\\s]+",u=/\[([^]*?)\]/gm,c=function(){};function f(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")}function d(t,e){for(var n=[],r=0,a=t.length;r<a;r++)n.push(t[r].substr(0,e));return n}function m(t){return function(e,n,r){var a=r[t].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~a&&(e.month=a)}}function h(t,e){t=String(t),e=e||2;while(t.length<e)t="0"+t;return t}var v=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],g=["January","February","March","April","May","June","July","August","September","October","November","December"],p=d(g,3),b=d(v,3);r.i18n={dayNamesShort:b,dayNames:v,monthNamesShort:p,monthNames:g,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!==10)*t%10]}};var w={D:function(t){return t.getDate()},DD:function(t){return h(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return t.getDay()},dd:function(t){return h(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return h(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return h(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return h(t.getFullYear(),4)},h:function(t){return t.getHours()%12||12},hh:function(t){return h(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return h(t.getHours())},m:function(t){return t.getMinutes()},mm:function(t){return h(t.getMinutes())},s:function(t){return t.getSeconds()},ss:function(t){return h(t.getSeconds())},S:function(t){return Math.round(t.getMilliseconds()/100)},SS:function(t){return h(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return h(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+h(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)}},y={D:[i,function(t,e){t.day=e}],Do:[i+l,function(t,e){t.day=parseInt(e,10)}],M:[i,function(t,e){t.month=e-1}],YY:[i,function(t,e){var n=new Date,r=+(""+n.getFullYear()).substr(0,2);t.year=""+(e>68?r-1:r)+e}],h:[i,function(t,e){t.hour=e}],m:[i,function(t,e){t.minute=e}],s:[i,function(t,e){t.second=e}],YYYY:[s,function(t,e){t.year=e}],S:["\\d",function(t,e){t.millisecond=100*e}],SS:["\\d{2}",function(t,e){t.millisecond=10*e}],SSS:[o,function(t,e){t.millisecond=e}],d:[i,c],ddd:[l,c],MMM:[l,m("monthNamesShort")],MMMM:[l,m("monthNames")],a:[l,function(t,e,n){var r=e.toLowerCase();r===n.amPm[0]?t.isPm=!1:r===n.amPm[1]&&(t.isPm=!0)}],ZZ:["[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z",function(t,e){var n,r=(e+"").match(/([+-]|\d\d)/gi);r&&(n=60*r[1]+parseInt(r[2],10),t.timezoneOffset="+"===r[0]?n:-n)}]};y.dd=y.d,y.dddd=y.ddd,y.DD=y.D,y.mm=y.m,y.hh=y.H=y.HH=y.h,y.MM=y.M,y.ss=y.s,y.A=y.a,r.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},r.format=function(t,e,n){var i=n||r.i18n;if("number"===typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date in fecha.format");e=r.masks[e]||e||r.masks["default"];var o=[];return e=e.replace(u,(function(t,e){return o.push(e),"@@@"})),e=e.replace(a,(function(e){return e in w?w[e](t,i):e.slice(1,e.length-1)})),e.replace(/@@@/g,(function(){return o.shift()}))},r.parse=function(t,e,n){var i=n||r.i18n;if("string"!==typeof e)throw new Error("Invalid format in fecha.parse");if(e=r.masks[e]||e,t.length>1e3)return null;var o={},s=[],l=[];e=e.replace(u,(function(t,e){return l.push(e),"@@@"}));var c=f(e).replace(a,(function(t){if(y[t]){var e=y[t];return s.push(e[1]),"("+e[0]+")"}return t}));c=c.replace(/@@@/g,(function(){return l.shift()}));var d=t.match(new RegExp(c,"i"));if(!d)return null;for(var m=1;m<d.length;m++)s[m-1](o,d[m],i);var h,v=new Date;return!0===o.isPm&&null!=o.hour&&12!==+o.hour?o.hour=+o.hour+12:!1===o.isPm&&12===+o.hour&&(o.hour=0),null!=o.timezoneOffset?(o.minute=+(o.minute||0)-+o.timezoneOffset,h=new Date(Date.UTC(o.year||v.getFullYear(),o.month||0,o.day||1,o.hour||0,o.minute||0,o.second||0,o.millisecond||0))):h=new Date(o.year||v.getFullYear(),o.month||0,o.day||1,o.hour||0,o.minute||0,o.second||0,o.millisecond||0),h},e["a"]=r},bc30:function(t,e,n){"use strict";var r=n("3a40"),a=n.n(r);a.a},cba1:function(t,e,n){}}]);