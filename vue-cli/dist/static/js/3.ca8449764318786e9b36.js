webpackJsonp([3],{"6SxY":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("9s7F"),n={data:function(){return{audioCtx:void 0,gainNode:void 0,oscillator:void 0,soundType:"square",running:!1,volume:.5,song:""}},watch:{volume:function(t){this.running&&this.gainNode.gain.setValueAtTime(t,this.audioCtx.currentTime)}},methods:{stopPlaying:function(){this.oscillator.stop(),this.running=!1},togglePlay:function(){var t=this;if(this.running)this.stopPlaying();else{this.gainNode.gain.setValueAtTime(this.volume,this.audioCtx.currentTime);var e=this.audioCtx.createOscillator();e.type=this.soundType;var i=Object(s.processMML)(this.song);Object(s.setOscillator)(e,i,this.audioCtx.currentTime),e.connect(this.gainNode),e.start(),e.stop(this.audioCtx.currentTime+i[i.length-1].time+.1),e.addEventListener("ended",function(){t.stopPlaying()}),this.oscillator=e,this.running=!0}}},mounted:function(){this.audioCtx=new AudioContext;var t=this.audioCtx.createGain();t.connect(this.audioCtx.destination),t.gain.setValueAtTime(this.volume,this.audioCtx.currentTime),this.gainNode=t}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"WebAudioAPI"},[i("el-row",[i("el-col",{attrs:{span:24}},[i("p",{staticClass:"itemTitle"},[t._v("类型")]),t._v(" "),i("el-select",{attrs:{disabled:t.running},model:{value:t.soundType,callback:function(e){t.soundType=e},expression:"soundType"}},[i("el-option",{attrs:{label:"方波",value:"square"}}),t._v(" "),i("el-option",{attrs:{label:"三角波",value:"triangle"}}),t._v(" "),i("el-option",{attrs:{label:"正弦波",value:"sine"}}),t._v(" "),i("el-option",{attrs:{label:"锯齿波",value:"sawtooth"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:24}},[i("p",{staticClass:"itemTitle"},[t._v("乐曲")]),t._v(" "),i("el-input",{attrs:{type:"textarea",rows:3,disabled:t.running},model:{value:t.song,callback:function(e){t.song=e},expression:"song"}})],1),t._v(" "),i("el-col",{attrs:{span:24}},[i("p",{staticClass:"itemTitle"},[t._v("音量")]),t._v(" "),i("el-slider",{attrs:{min:0,max:1,step:.001,"show-tooltip":!1},model:{value:t.volume,callback:function(e){t.volume=e},expression:"volume"}})],1),t._v(" "),i("el-col",{attrs:{span:24}},[i("el-button",{attrs:{type:"primary"},on:{click:t.togglePlay}},[t._v(t._s(t.running?"停止":"播放"))])],1)],1)],1)},staticRenderFns:[]};var a=i("VU/8")(n,o,!1,function(t){i("spB1")},"data-v-50ce54e0",null);e.default=a.exports},"9s7F":function(t,e,i){var s,n,o;!function(i,a){"use strict";n=[],void 0===(o="function"==typeof(s=a)?s.apply(e,n):s)||(t.exports=o)}(0,function(){"use strict";var t=[16.352,17.324,18.354,19.445,20.602,21.827,23.125,24.5,25.967,27.5,29.135,30.868,32.703,34.648,36.709,38.891,41.203,43.654,46.249,48.999,51.913,55,58.27,61.736,65.406,69.296,73.416,77.782,82.407,87.307,92.499,97.999,103.83,110,116.54,123.47,130.81,138.59,146.83,155.56,164.81,174.61,185,196,207.65,220,233.08,246.94,261.63,227.18,293.66,311.13,326.63,349.23,369.99,392,415.3,440,466.16,493.88,523.25,554.37,587.33,622.25,659.26,698.46,739.99,783.99,830.61,880,932.33,987.77,1046.5,1108.7,1174.7,1244.5,1318.5,1396.9,1480,1568,1661.2,1760,1864.7,1975.53,2093,2217.5,2349.3,2489,2637,2793.8,2960,3136,3322.4,3520,3729.3,3951.05,4186,4439.9,4498.6,4978,5474,5587.7,5919.9,6271.9,6644.9,7040,7458.6,7902.1];return{processMML:function(e){for(var i=e.slice(),s=void 0,n=0,o=[],a={P:0,C:1,"C+":2,D:3,"D+":4,E:5,F:6,"F+":7,G:8,"G+":9,A:10,"A+":11,B:12},l={"D-":"C+","E-":"D+","G-":"F+","A-":"G+","B-":"A+"};i.length;){if(s=/^\s+/.exec(i));else if(s=/^(T|L|O)(\d+)/i.exec(i))o.push([s[1].toUpperCase(),Number(s[2])]);else if(s=/^(ML|MN|MS|\<|\>)/i.exec(i))o.push([s[0].toUpperCase()]);else{if(!(s=/^([CDEFGAB][#+-]?|P)(\d*)(\.*)/i.exec(i)))throw SyntaxError("Invalid MML character at position "+n);{let t=s[1].toUpperCase().replace("#","+");if(l[t]&&(t=l[t]),void 0===a[t])throw SyntaxError("Invalid note "+s[1]+" at position "+n);o.push([t,Number(s[2]),s[3]])}}i=i.slice(s[0].length),n+=s[0].length}var r=5,u=1.875,c=4,p=.01,d=0,v=[],h={ML:()=>{p=0},MS:()=>{p=.1},MN:()=>{p=.01},"<":()=>{r>0&&r--},">":()=>{r<8&&r++},T:t=>{u=240/t},L:t=>{c=t},O:t=>{r=t}};for(let e of o){if(h[e[0]]){h[e[0]](e[1]);continue}let i=e[0];if(void 0===a[i])continue;let s=u/(e[1]||c);switch(e[2]){case".":s*=1.5;break;case"..":s*=1.75}let n=a[i]?t[a[i]-1+12*r]:0;p?s>p?(v.push({freq:n,time:d}),v.push({freq:0,time:d+s-p})):v.push({freq:0,time:d}):v.push({freq:n,time:d}),d+=s}return v.push({freq:0,time:d}),v},setOscillator:function(t,e,i){for(let s of e)t.frequency.setValueAtTime(s.freq,i+s.time)}}})},spB1:function(t,e){}});